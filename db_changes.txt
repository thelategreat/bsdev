
-- users
alter table users add column nickname varchar(128);
alter table users add column webpage varchar(128);
alter table users add column chatnick varchar(128);
alter table users add column ccno varchar(128);
alter table users add column ccname varchar(128);
alter table users add column ccexp varchar(128);
alter table users add column billto varchar(128);
alter table users add column shipto varchar(128);


CREATE TABLE `orders` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_no` varchar(25) NOT NULL,
  `order_dt` datetime DEFAULT NULL,
  `shipto` text,
  `billto` text,
  `shipvia` char(3) DEFAULT NULL,
  `shipcost` decimal(10,2) DEFAULT NULL,
  `ccno` varchar(25) DEFAULT NULL,
  `ccname` varchar(65) DEFAULT NULL,
  `ccexp` char(5) DEFAULT NULL,
  `tax1` decimal(10,2) DEFAULT NULL,
  `tax2` decimal(10,2) DEFAULT NULL,
  `subtotal` decimal(10,2) DEFAULT NULL,
  `state` char(5) DEFAULT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `order_line` (
  `order_id` int(11) NOT NULL,
  `item_id` int(11) NOT NULL,
  `qty` int(11) NOT NULL DEFAULT '1',
  `price` decimal(10,2) DEFAULT NULL,
  `name` varchar(256) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE order_line ADD CONSTRAINT fk_orders 
  foreign key(order_id) 
  references orders(id) 
    on update cascade 
    on delete cascade;

CREATE TABLE `vendors` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(128) NOT NULL,
  `vtype` char(1) NOT NULL,
  `status` char(1) NOT NULL,
  `currency` char(3) NOT NULL DEFAULT 'CAD',
  `commision` decimal(5,4) NOT NULL DEFAULT 0.0,
  `order_method` char(3),
  `cs_method` char(3),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

